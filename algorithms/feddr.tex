\begin{algorithm}[ht]
% \SetAlgoNoLine
% \DontPrintSemicolon
{\bfseries Initiation:} $x^{(0)} \in \operatorname{dom}(f)$, $s > 0$, $\alpha > 0$, $\varepsilon_{i,0} \geqslant 0$ \\
\hspace{2em}Init server: $\overline{x}^{(0)} = \widetilde{x}^{(0)} = y^{(0)} = x^{(0)}$\\
\hspace{2em}Init clients: $y_i^{(0)} = x^{(0)}$, {\color{red}$x_i^{(0)} \approx \operatorname{prox}_{sf_i}(y_i^{(0)})$}, $\widehat{x}_i^{(0)} = 2x_i^{(0)} - y_i^{(0)}$\;
\For{$t = 0, 2, \cdots, T-1$}{
    sample $\mathcal{S}^{(t)} \subseteq [K]$ \tcc*[h]{active clients}\;
    each user $k \in \mathcal{S}^{(t)}$ receives $\overline{x}^{(t)}$ from server \tcc*[h]{communication}\;
    \For{each user $i\in\mathcal{S}^{(t)}$ {\bfseries in parallel}}{
        choose $\varepsilon_{k,t+1} \geqslant 0$, update 
        $y_k^{(t+1)} \gets y_k^{(t)} + \alpha(\overline{x}^{(t)} - x_k^{(t)}),$ \;
        $x_k^{(t+1)} \approx \operatorname{prox}_{sf_k}(y_k^{(t+1)}), \ \widehat{x}_k^{(t+1)} \gets 2x_k^{(t+1)} - y_k^{(t+1)}$ \;
        send $\Delta \widehat{x}_k^{(t)} = \widehat{x}_k^{(t+1)} - \widehat{x}_k^{(t)}$ to server\;
        }
    {\bfseries Server Update:}\;
    \Indp
        $y^{(t+1)} \gets y^{(t)} + \alpha (\overline{x}^{(t)} - y^{(t)})$\;
        $\widetilde{x}^{(t+1)} \gets \widetilde{x}^{(t)} + \frac{1}{n}\sum_{k \in \mathcal{S}^{(t)}} \Delta \widehat{x}_k^{(t)}$\;
        $\overline{x}^{(t+1)} \gets \operatorname{prox}_{\frac{Ks}{K+1}g} (\frac{K}{K+1}\widetilde{x}^{(t+1)} + \frac{1}{K+1}y^{(t+1)})$ \;
}
% return $\overline{x}^{(T+1)}$\;
\caption{FedDR\cite{tran2021feddr}算法伪代码}
\end{algorithm}
